"use strict";var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(require("react")),immutable_1=__importDefault(require("../util/immutable")),Context_1=require("./Context");exports.default=function(a,u){return function(i){return r=react_1.default.Component,__extends(t,r),t.prototype.componentDidMount=function(){var o=this;this.unsubscribe=this.store.subscribe(function(n){var t=o.store.getState();o.setState({state:t},function(){var t=n.success,e=n.ins,r=__rest(n,["success","ins"]);t&&e&&o.ins===e&&t.call(e,immutable_1.default.cloneDeep(r))})})},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.getInstance=function(){return this.ins},t.prototype.render=function(){var s=this;return react_1.default.createElement(Context_1.ProviderContext.Consumer,null,function(t){var e=t.store;s.store||(s.store=e);var r=s.state.state?s.state.state:s.store.getState(),n={};u&&(n=u(s.store.dispatch.bind(s.store)));var o={};return a&&(o=a(r)),react_1.default.createElement(i,__assign({ref:function(t){s.ins=t}},s.props,o,n,{dispatch:e.dispatch}))})},t;function t(t){var e=r.call(this,t)||this;return e.state={state:null},e}var r}};
//# sourceMappingURL=createConnect.js.map
