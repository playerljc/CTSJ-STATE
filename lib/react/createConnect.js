"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_Context=require("./Context"),_immutable=_interopRequireDefault(require("../util/immutable"));function _createSuper(i){var u=_isNativeReflectConstruct();return function(){var e,t,r=(0,_getPrototypeOf2.default)(i);return t=u?(e=(0,_getPrototypeOf2.default)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),(0,_possibleConstructorReturn2.default)(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _default=function(a,o){return function(s){return function(e){(0,_inherits2.default)(r,e);var t=_createSuper(r);function r(e){var u;return(0,_classCallCheck2.default)(this,r),u=t.call(this,e),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(u),"onSubscribe",function(i){var e=(0,_assertThisInitialized2.default)(u).store.getState(),t=JSON.parse(JSON.stringify(u.state.state||{}));u.setState({state:_lodash.default.merge(t,e)},function(){var e=i.success,t=i.ins,r=(0,_objectWithoutProperties2.default)(i,["success","ins"]);e&&t&&u.ins===t&&e.call(t,_immutable.default.cloneDeep(r))})}),u.state={state:null},u}return(0,_createClass2.default)(r,[{key:"componentDidMount",value:function(){var e=this.store;this.unsubscribe=e.subscribe(this.onSubscribe)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"getInstance",value:function(){return this.ins}},{key:"render",value:function(){var n=this;return _react.default.createElement(_Context.ProviderContext.Consumer,null,function(e){var t=e.store;n.store||(n.store=t);var r=n.state.state?n.state.state:n.store.getState(),i={};o&&(i=o(n.store.dispatch.bind(n.store)));var u={};return a&&(u=a(r)),console.log(n.state),_react.default.createElement(s,(0,_extends2.default)({ref:function(e){n.ins=e}},n.props,u,i,{dispatch:t.dispatch}))})}}]),r}(_react.default.Component)}};exports.default=_default;
//# sourceMappingURL=createConnect.js.map
