"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.for-each"),require("core-js/modules/es.function.bind"),require("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_react=_interopRequireDefault(require("react")),_Context=require("./Context"),_immutable=_interopRequireDefault(require("../util/immutable"));function ownKeys(t,e){var r,u=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),u.push.apply(u,r)),u}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _createSuper(r){var u=_isNativeReflectConstruct();return function(){var e,t=(0,_getPrototypeOf2.default)(r);return t=u?(e=(0,_getPrototypeOf2.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,_possibleConstructorReturn2.default)(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _default=function(o,a){return function(n,u){var r=function(e){(0,_inherits2.default)(r,e);var t=_createSuper(r);function r(e){var i;return(0,_classCallCheck2.default)(this,r),(i=t.call(this,e)).onSubscribe=function(u){var e=(0,_assertThisInitialized2.default)(i).store.getState();i.setState({state:e},function(){var e=u.success,t=u.ins,r=(0,_objectWithoutProperties2.default)(u,["success","ins"]);e&&t&&i.ref.current===t&&e.call(t,_immutable.default.cloneDeep(r))})},i.state={state:null},i}return(0,_createClass2.default)(r,[{key:"componentDidMount",value:function(){var e=this.store;this.unsubscribe=e.subscribe(this.onSubscribe)}},{key:"componentWillUnmount",value:function(){var e,r=this;u&&u.isClear&&(void 0===(e=u.clearGroup)?[]:e).forEach(function(e){var t=e.type,t=void 0===t?"":t,e=e.defaultState,e=void 0===e?{}:e;r.store.dispatch(_objectSpread({type:t},e||{}))}),this.unsubscribe()}},{key:"render",value:function(){var i=this;return _react.default.createElement(_Context.ProviderContext.Consumer,null,function(e){var t=e.store;i.store||(i.store=t);var r=i.state.state||i.store.getState(),u={};a&&(u=a(i.store.dispatch.bind(i.store)));e={};o&&(e=o(r));t=_objectSpread(_objectSpread(_objectSpread(_objectSpread({},i.props),e),u),{},{dispatch:t.dispatch.bind(t)});return n.prototype.isReactComponent&&(t.ref=i.props.forwardedRef||_react.default.createRef()),_react.default.createElement(n,t)})}}]),r}(_react.default.Component);return _react.default.forwardRef(function(e,t){return _react.default.createElement(r,(0,_extends2.default)({},e,{forwardedRef:t}))})}};exports.default=_default;
//# sourceMappingURL=createConnect.js.map
