{"version":3,"sources":["react/createConnect.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_extends2","_objectWithoutProperties2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_react","_propTypes","_immutable","_default","mapStateToProps","mapDispatchToProps","Component","WrapClass","_React$Component","props","_this","this","call","state","key","_this2","unsubscribe","context","store","subscribe","action","getState","setState","success","ins","other","cloneDeep","_this3","dispatch","bind","createElement","ref","contextTypes","object"],"mappings":"AAAA,aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,aAAI,EAErB,IAAIE,UAAYN,uBAAuBC,QAAQ,mCAE3CM,0BAA4BP,uBAAuBC,QAAQ,mDAE3DO,iBAAmBR,uBAAuBC,QAAQ,0CAElDQ,cAAgBT,uBAAuBC,QAAQ,uCAE/CS,4BAA8BV,uBAAuBC,QAAQ,qDAE7DU,iBAAmBX,uBAAuBC,QAAQ,0CAElDW,WAAaZ,uBAAuBC,QAAQ,oCAE5CY,OAASb,uBAAuBC,QAAQ,UAExCa,WAAad,uBAAuBC,QAAQ,eAE5Cc,WAAaf,uBAAuBC,QAAQ,sBAQ5Ce,SAAW,SAAkBC,EAAiBC,GAKhD,OAAO,SAAUC,GACf,IAAIC,EAAyB,SAAUC,GAGrC,SAASD,EAAUE,GACjB,IAAIC,EAOJ,OALA,EAAIf,iBAA0B,SAAGgB,KAAMJ,IACvCG,GAAQ,EAAIb,4BAAqC,SAAGc,MAAM,EAAIb,iBAA0B,SAAGS,GAAWK,KAAKD,KAAMF,KAC3GI,MAAQ,CACZA,MAAO,MAEFH,EAyET,OAnFA,EAAIX,WAAoB,SAAGQ,EAAWC,IAatC,EAAIZ,cAAuB,SAAGW,EAAW,CAAC,CACxCO,IAAK,oBACLtB,MAAO,WACL,IAAIuB,EAASJ,KAEbA,KAAKK,YAAcL,KAAKM,QAAQC,MAAMC,UAAU,SAAUC,GACxD,IAAIP,EAAQE,EAAOE,QAAQC,MAAMG,WAEjCN,EAAOO,SAAS,CACdT,MAAOA,GACN,WAED,IAAIU,EAAUH,EAAOG,QACjBC,EAAMJ,EAAOI,IACbC,GAAQ,EAAI/B,0BAAmC,SAAG0B,EAAQ,CAAC,UAAW,QAKtEG,GAAWC,GACTT,EAAOS,MAAQA,GACjBD,EAAQX,KAAKY,EAAKtB,WAAoB,QAAEwB,UAAUD,UAM3D,CACDX,IAAK,uBACLtB,MAAO,WACLmB,KAAKK,gBAON,CACDF,IAAK,cACLtB,MAAO,WACL,OAAOmB,KAAKa,MAEb,CACDV,IAAK,SACLtB,MAAO,WACL,IAAImC,EAAShB,KAETO,EAAQP,KAAKM,QAAQC,MACrBL,EAAQK,EAAMG,WACdO,EAAW,GAEXvB,IACFuB,EAAWvB,EAAmBa,EAAMU,SAASC,KAAKX,KAGpD,IAAIT,EAAQ,GAMZ,OAJIL,IACFK,EAAQL,EAAgBS,IAGnBb,OAAgB,QAAE8B,cAAcxB,GAAW,EAAIb,UAAmB,SAAG,CAC1EsC,IAAK,SAAaP,GAChBG,EAAOH,IAAMA,IAEdb,KAAKF,MAAOA,EAAOmB,EAAU,CAC9BA,SAAUV,EAAMU,gBAIfrB,EApFoB,CAqF3BP,OAAgB,QAAEM,WAKpB,OAHAC,EAAUyB,aAAe,CACvBd,MAAOjB,WAAoB,QAAEgC,QAExB1B,IAIXhB,QAAiB,QAAIY","file":"createConnect.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _immutable = _interopRequireDefault(require(\"../util/immutable\"));\n\n/**\r\n * createConnect\r\n * @param {Function} - mapStateToProps\r\n * @param {Function} - mapDispatchToProps\r\n * @return {HOC}\r\n */\nvar _default = function _default(mapStateToProps, mapDispatchToProps) {\n  /**\r\n   * ConnectHOC\r\n   * @param {ReactElement} - Component\r\n   */\n  return function (Component) {\n    var WrapClass = /*#__PURE__*/function (_React$Component) {\n      (0, _inherits2[\"default\"])(WrapClass, _React$Component);\n\n      function WrapClass(props) {\n        var _this;\n\n        (0, _classCallCheck2[\"default\"])(this, WrapClass);\n        _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(WrapClass).call(this, props));\n        _this.state = {\n          state: null\n        };\n        return _this;\n      }\n\n      (0, _createClass2[\"default\"])(WrapClass, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.context.store.subscribe(function (action) {\n            var state = _this2.context.store.getState();\n\n            _this2.setState({\n              state: state\n            }, function () {\n              // 如果是当前实力进行的数据更改才会调用success\n              var success = action.success,\n                  ins = action.ins,\n                  other = (0, _objectWithoutProperties2[\"default\"])(action, [\"success\", \"ins\"]); // console.log('redux进行了数据改变的通知');\n              // console.log(action);\n              // console.log(this.ins);\n              // console.log(this.ins === ins);\n\n              if (success && ins) {\n                if (_this2.ins === ins) {\n                  success.call(ins, _immutable[\"default\"].cloneDeep(other));\n                }\n              }\n            });\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.unsubscribe();\n        }\n        /**\r\n         * getInstance\r\n         * @return {ReactElement}\r\n         */\n\n      }, {\n        key: \"getInstance\",\n        value: function getInstance() {\n          return this.ins;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this3 = this;\n\n          var store = this.context.store;\n          var state = store.getState();\n          var dispatch = {};\n\n          if (mapDispatchToProps) {\n            dispatch = mapDispatchToProps(store.dispatch.bind(store));\n          }\n\n          var props = {};\n\n          if (mapStateToProps) {\n            props = mapStateToProps(state);\n          }\n\n          return _react[\"default\"].createElement(Component, (0, _extends2[\"default\"])({\n            ref: function ref(ins) {\n              _this3.ins = ins;\n            }\n          }, this.props, props, dispatch, {\n            dispatch: store.dispatch\n          }));\n        }\n      }]);\n      return WrapClass;\n    }(_react[\"default\"].Component);\n\n    WrapClass.contextTypes = {\n      store: _propTypes[\"default\"].object\n    };\n    return WrapClass;\n  };\n};\n\nexports[\"default\"] = _default;"]}