{"version":3,"sources":["react/createConnect.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_extends2","_objectWithoutProperties2","_classCallCheck2","_createClass2","_assertThisInitialized2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_defineProperty2","_react","_propTypes","_immutable","_createSuper","Derived","result","Super","_isNativeReflectConstruct","NewTarget","this","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","_default","mapStateToProps","mapDispatchToProps","Component","WrapClass","_React$Component","_super","props","_this","action","state","context","store","getState","setState","success","ins","other","cloneDeep","key","unsubscribe","subscribe","onSubscribe","_this2","dispatch","bind","createElement","ref","contextTypes","object"],"mappings":"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","file":"createConnect.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _immutable = _interopRequireDefault(require(\"../util/immutable\"));\n\nfunction _createSuper(Derived) { return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\r\n * createConnect\r\n * @param {Function} - mapStateToProps\r\n * @param {Function} - mapDispatchToProps\r\n * @return {HOC}\r\n */\nvar _default = function _default(mapStateToProps, mapDispatchToProps) {\n  /**\r\n   * ConnectHOC\r\n   * @param {ReactElement} - Component\r\n   */\n  return function (Component) {\n    var WrapClass = /*#__PURE__*/function (_React$Component) {\n      (0, _inherits2[\"default\"])(WrapClass, _React$Component);\n\n      var _super = _createSuper(WrapClass);\n\n      function WrapClass(props) {\n        var _this;\n\n        (0, _classCallCheck2[\"default\"])(this, WrapClass);\n        _this = _super.call(this, props);\n        (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onSubscribe\", function (action) {\n          var _assertThisInitialize = (0, _assertThisInitialized2[\"default\"])(_this),\n              store = _assertThisInitialize.context.store;\n\n          var state = store.getState();\n\n          _this.setState({\n            state: state\n          }, function () {\n            // 如果是当前实力进行的数据更改才会调用success\n            var success = action.success,\n                ins = action.ins,\n                other = (0, _objectWithoutProperties2[\"default\"])(action, [\"success\", \"ins\"]); // console.log('redux进行了数据改变的通知');\n            // console.log(action);\n            // console.log(this.ins);\n            // console.log(this.ins === ins);\n\n            if (success && ins) {\n              if (_this.ins === ins) {\n                success.call(ins, _immutable[\"default\"].cloneDeep(other));\n              }\n            }\n          });\n        });\n        _this.state = {\n          state: null\n        };\n        return _this;\n      }\n\n      (0, _createClass2[\"default\"])(WrapClass, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var store = this.context.store;\n          this.unsubscribe = store.subscribe(this.onSubscribe);\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.unsubscribe();\n        }\n      }, {\n        key: \"getInstance\",\n\n        /**\r\n         * getInstance\r\n         * @return {ReactElement}\r\n         */\n        value: function getInstance() {\n          return this.ins;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          var store = this.context.store;\n          var state = store.getState();\n          var dispatch = {};\n\n          if (mapDispatchToProps) {\n            dispatch = mapDispatchToProps(store.dispatch.bind(store));\n          }\n\n          var props = {};\n\n          if (mapStateToProps) {\n            props = mapStateToProps(state);\n          }\n\n          return /*#__PURE__*/_react[\"default\"].createElement(Component, (0, _extends2[\"default\"])({\n            ref: function ref(ins) {\n              _this2.ins = ins;\n            }\n          }, this.props, props, dispatch, {\n            dispatch: store.dispatch\n          }));\n        }\n      }]);\n      return WrapClass;\n    }(_react[\"default\"].Component);\n\n    WrapClass.contextTypes = {\n      store: _propTypes[\"default\"].object\n    };\n    return WrapClass;\n  };\n};\n\nexports[\"default\"] = _default;"]}