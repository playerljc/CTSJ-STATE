{"version":3,"sources":["react/createConnect.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_extends2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_react","_propTypes","_immutable","_default","mapStateToProps","mapDispatchToProps","Component","Callback","WrapClass","_React$Component","props","_this","this","call","state","key","_this2","unsubscribe","context","store","subscribe","getState","setState","ins","_this3","dispatch","bind","cloneDeep","createElement","ref","contextTypes","object"],"mappings":"AAAA,aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,aAAI,EAErB,IAAIE,UAAYN,uBAAuBC,QAAQ,mCAE3CM,iBAAmBP,uBAAuBC,QAAQ,0CAElDO,cAAgBR,uBAAuBC,QAAQ,uCAE/CQ,4BAA8BT,uBAAuBC,QAAQ,qDAE7DS,iBAAmBV,uBAAuBC,QAAQ,0CAElDU,WAAaX,uBAAuBC,QAAQ,oCAE5CW,OAASZ,uBAAuBC,QAAQ,UAExCY,WAAab,uBAAuBC,QAAQ,eAE5Ca,WAAad,uBAAuBC,QAAQ,sBAQ5Cc,SAAW,SAAkBC,EAAiBC,GAMhD,OAAO,SAAUC,EAAWC,GAC1B,IAAIC,EAEJ,SAAUC,GAGR,SAASD,EAAUE,GACjB,IAAIC,EAOJ,OALA,EAAIhB,iBAA0B,SAAGiB,KAAMJ,IACvCG,GAAQ,EAAId,4BAAqC,SAAGe,MAAM,EAAId,iBAA0B,SAAGU,GAAWK,KAAKD,KAAMF,KAC3GI,MAAQ,CACZA,MAAO,MAEFH,EA6DT,OAvEA,EAAIZ,WAAoB,SAAGS,EAAWC,IAatC,EAAIb,cAAuB,SAAGY,EAAW,CAAC,CACxCO,IAAK,oBACLtB,MAAO,WACL,IAAIuB,EAASJ,KAEbA,KAAKK,YAAcL,KAAKM,QAAQC,MAAMC,UAAU,WAC9C,IAAIN,EAAQE,EAAOE,QAAQC,MAAME,WAEjCL,EAAOM,SAAS,CACdR,MAAOA,GACN,WACGP,GACFA,UAKP,CACDQ,IAAK,uBACLtB,MAAO,WACLmB,KAAKK,gBAON,CACDF,IAAK,cACLtB,MAAO,WACL,OAAOmB,KAAKW,MAEb,CACDR,IAAK,SACLtB,MAAO,WACL,IAAI+B,EAASZ,KAETO,EAAQP,KAAKM,QAAQC,MACrBL,EAAQK,EAAME,WACdI,EAAW,GAEXpB,IACFoB,EAAWpB,EAAmBc,EAAMM,SAASC,KAAKP,KAGpD,IAAIT,EAAQ,GAMZ,OAJIN,IACFM,EAAQN,EAAgBF,WAAoB,QAAEyB,UAAUb,KAGnDd,OAAgB,QAAE4B,cAActB,GAAW,EAAIZ,UAAmB,SAAG,CAC1EmC,IAAK,SAAaN,GAChB,OAAOC,EAAOD,IAAMA,IAErBb,EAAOE,KAAKF,MAAOe,QAGnBjB,EAxET,CAyEER,OAAgB,QAAEM,WAKpB,OAHAE,EAAUsB,aAAe,CACvBX,MAAOlB,WAAoB,QAAE8B,QAExBvB,IAIXhB,QAAiB,QAAIW","file":"createConnect.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _immutable = _interopRequireDefault(require(\"../util/immutable\"));\n\n/**\r\n * createConnect\r\n * @param {Function} - mapStateToProps\r\n * @param {Function} - mapDispatchToProps\r\n * @return {HOC}\r\n */\nvar _default = function _default(mapStateToProps, mapDispatchToProps) {\n  /**\r\n   * ConnectHOC\r\n   * @param {ReactElement} - Component\r\n   * @param {Func} - Callback\r\n   */\n  return function (Component, Callback) {\n    var WrapClass =\n    /*#__PURE__*/\n    function (_React$Component) {\n      (0, _inherits2[\"default\"])(WrapClass, _React$Component);\n\n      function WrapClass(props) {\n        var _this;\n\n        (0, _classCallCheck2[\"default\"])(this, WrapClass);\n        _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(WrapClass).call(this, props));\n        _this.state = {\n          state: null\n        };\n        return _this;\n      }\n\n      (0, _createClass2[\"default\"])(WrapClass, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.context.store.subscribe(function () {\n            var state = _this2.context.store.getState();\n\n            _this2.setState({\n              state: state\n            }, function () {\n              if (Callback) {\n                Callback();\n              }\n            });\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.unsubscribe();\n        }\n        /**\r\n         * getInstance\r\n         * @return {ReactElement}\r\n         */\n\n      }, {\n        key: \"getInstance\",\n        value: function getInstance() {\n          return this.ins;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this3 = this;\n\n          var store = this.context.store;\n          var state = store.getState();\n          var dispatch = {};\n\n          if (mapDispatchToProps) {\n            dispatch = mapDispatchToProps(store.dispatch.bind(store));\n          }\n\n          var props = {};\n\n          if (mapStateToProps) {\n            props = mapStateToProps(_immutable[\"default\"].cloneDeep(state));\n          }\n\n          return _react[\"default\"].createElement(Component, (0, _extends2[\"default\"])({\n            ref: function ref(ins) {\n              return _this3.ins = ins;\n            }\n          }, props, this.props, dispatch));\n        }\n      }]);\n      return WrapClass;\n    }(_react[\"default\"].Component);\n\n    WrapClass.contextTypes = {\n      store: _propTypes[\"default\"].object\n    };\n    return WrapClass;\n  };\n};\n\nexports[\"default\"] = _default;"]}