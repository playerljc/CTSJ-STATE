{"version":3,"sources":["react/createConnect.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_extends2","_objectWithoutProperties2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_defineProperty2","_react","_propTypes","_immutable","_default","mapStateToProps","mapDispatchToProps","Component","WrapClass","_React$Component","props","_this","this","call","action","state","context","store","getState","setState","success","ins","other","cloneDeep","key","unsubscribe","subscribe","onSubscribe","_this2","dispatch","bind","createElement","ref","contextTypes","object"],"mappings":"AAAA,aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,aAAI,EAErB,IAAIE,UAAYN,uBAAuBC,QAAQ,mCAE3CM,0BAA4BP,uBAAuBC,QAAQ,mDAE3DO,iBAAmBR,uBAAuBC,QAAQ,0CAElDQ,cAAgBT,uBAAuBC,QAAQ,uCAE/CS,4BAA8BV,uBAAuBC,QAAQ,qDAE7DU,iBAAmBX,uBAAuBC,QAAQ,0CAElDW,wBAA0BZ,uBAAuBC,QAAQ,iDAEzDY,WAAab,uBAAuBC,QAAQ,oCAE5Ca,iBAAmBd,uBAAuBC,QAAQ,0CAElDc,OAASf,uBAAuBC,QAAQ,UAExCe,WAAahB,uBAAuBC,QAAQ,eAE5CgB,WAAajB,uBAAuBC,QAAQ,sBAQ5CiB,SAAW,SAAkBC,EAAiBC,GAKhD,OAAO,SAAUC,GACf,IAAIC,EAAyB,SAAUC,GAGrC,SAASD,EAAUE,GACjB,IAAIC,EA+BJ,OA7BA,EAAIjB,iBAA0B,SAAGkB,KAAMJ,GACvCG,GAAQ,EAAIf,4BAAqC,SAAGgB,MAAM,EAAIf,iBAA0B,SAAGW,GAAWK,KAAKD,KAAMF,KACjH,EAAIV,iBAA0B,UAAG,EAAIF,wBAAiC,SAAGa,GAAQ,cAAe,SAAUG,GACxG,IAGIC,GAHwB,EAAIjB,wBAAiC,SAAGa,GAClCK,QAAQC,MAExBC,WAElBP,EAAMQ,SAAS,CACbJ,MAAOA,GACN,WAED,IAAIK,EAAUN,EAAOM,QACjBC,EAAMP,EAAOO,IACbC,GAAQ,EAAI7B,0BAAmC,SAAGqB,EAAQ,CAAC,UAAW,QAKtEM,GAAWC,GACTV,EAAMU,MAAQA,GAChBD,EAAQP,KAAKQ,EAAKlB,WAAoB,QAAEoB,UAAUD,QAK1DX,EAAMI,MAAQ,CACZA,MAAO,MAEFJ,EAoDT,OAtFA,EAAIZ,WAAoB,SAAGS,EAAWC,IAqCtC,EAAId,cAAuB,SAAGa,EAAW,CAAC,CACxCgB,IAAK,oBACLjC,MAAO,WACL,IAAI0B,EAAQL,KAAKI,QAAQC,MACzBL,KAAKa,YAAcR,EAAMS,UAAUd,KAAKe,eAEzC,CACDH,IAAK,uBACLjC,MAAO,WACLqB,KAAKa,gBAEN,CACDD,IAAK,cAMLjC,MAAO,WACL,OAAOqB,KAAKS,MAEb,CACDG,IAAK,SACLjC,MAAO,WACL,IAAIqC,EAAShB,KAETK,EAAQL,KAAKI,QAAQC,MACrBF,EAAQE,EAAMC,WACdW,EAAW,GAEXvB,IACFuB,EAAWvB,EAAmBW,EAAMY,SAASC,KAAKb,KAGpD,IAAIP,EAAQ,GAMZ,OAJIL,IACFK,EAAQL,EAAgBU,IAGnBd,OAAgB,QAAE8B,cAAcxB,GAAW,EAAIf,UAAmB,SAAG,CAC1EwC,IAAK,SAAaX,GAChBO,EAAOP,IAAMA,IAEdT,KAAKF,MAAOA,EAAOmB,EAAU,CAC9BA,SAAUZ,EAAMY,gBAIfrB,EAvFoB,CAwF3BP,OAAgB,QAAEM,WAKpB,OAHAC,EAAUyB,aAAe,CACvBhB,MAAOf,WAAoB,QAAEgC,QAExB1B,IAIXlB,QAAiB,QAAIc","file":"createConnect.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _immutable = _interopRequireDefault(require(\"../util/immutable\"));\n\n/**\n * createConnect\n * @param {Function} - mapStateToProps\n * @param {Function} - mapDispatchToProps\n * @return {HOC}\n */\nvar _default = function _default(mapStateToProps, mapDispatchToProps) {\n  /**\n   * ConnectHOC\n   * @param {ReactElement} - Component\n   */\n  return function (Component) {\n    var WrapClass = /*#__PURE__*/function (_React$Component) {\n      (0, _inherits2[\"default\"])(WrapClass, _React$Component);\n\n      function WrapClass(props) {\n        var _this;\n\n        (0, _classCallCheck2[\"default\"])(this, WrapClass);\n        _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(WrapClass).call(this, props));\n        (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onSubscribe\", function (action) {\n          var _assertThisInitialize = (0, _assertThisInitialized2[\"default\"])(_this),\n              store = _assertThisInitialize.context.store;\n\n          var state = store.getState();\n\n          _this.setState({\n            state: state\n          }, function () {\n            // 如果是当前实力进行的数据更改才会调用success\n            var success = action.success,\n                ins = action.ins,\n                other = (0, _objectWithoutProperties2[\"default\"])(action, [\"success\", \"ins\"]); // console.log('redux进行了数据改变的通知');\n            // console.log(action);\n            // console.log(this.ins);\n            // console.log(this.ins === ins);\n\n            if (success && ins) {\n              if (_this.ins === ins) {\n                success.call(ins, _immutable[\"default\"].cloneDeep(other));\n              }\n            }\n          });\n        });\n        _this.state = {\n          state: null\n        };\n        return _this;\n      }\n\n      (0, _createClass2[\"default\"])(WrapClass, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var store = this.context.store;\n          this.unsubscribe = store.subscribe(this.onSubscribe);\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.unsubscribe();\n        }\n      }, {\n        key: \"getInstance\",\n\n        /**\n         * getInstance\n         * @return {ReactElement}\n         */\n        value: function getInstance() {\n          return this.ins;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          var store = this.context.store;\n          var state = store.getState();\n          var dispatch = {};\n\n          if (mapDispatchToProps) {\n            dispatch = mapDispatchToProps(store.dispatch.bind(store));\n          }\n\n          var props = {};\n\n          if (mapStateToProps) {\n            props = mapStateToProps(state);\n          }\n\n          return _react[\"default\"].createElement(Component, (0, _extends2[\"default\"])({\n            ref: function ref(ins) {\n              _this2.ins = ins;\n            }\n          }, this.props, props, dispatch, {\n            dispatch: store.dispatch\n          }));\n        }\n      }]);\n      return WrapClass;\n    }(_react[\"default\"].Component);\n\n    WrapClass.contextTypes = {\n      store: _propTypes[\"default\"].object\n    };\n    return WrapClass;\n  };\n};\n\nexports[\"default\"] = _default;"]}