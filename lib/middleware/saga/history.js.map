{"version":3,"file":"history.js","sources":["middleware/saga/history.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nrequire(\"core-js/modules/es.array.splice\");\n\nrequire(\"core-js/modules/es.function.bind\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/**\r\n * History\r\n * @class History\r\n * @classdesc 路由的改变\r\n */\nvar History = /*#__PURE__*/function () {\n  function History() {\n    (0, _classCallCheck2[\"default\"])(this, History);\n    this.handlers = [];\n    this.onHash = this.onHash.bind(this);\n    this.initEvent();\n  }\n\n  (0, _createClass2[\"default\"])(History, [{\n    key: \"initEvent\",\n    value: function initEvent() {\n      if (typeof window === 'undefined') return;\n      window.addEventListener('hashchange', this.onHash);\n    }\n  }, {\n    key: \"removeEvent\",\n    value: function removeEvent() {\n      if (typeof window === 'undefined') return;\n      window.removeEventListener('hashchange', this.onHash);\n    }\n  }, {\n    key: \"onHash\",\n    value: function onHash() {\n      this.handlers.forEach(function (h) {\n        if (typeof window !== 'undefined') {\n          h({\n            patchname: window.location.pathname\n          });\n        }\n      });\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(handler) {\n      var _this = this;\n\n      this.handlers.push(handler);\n      return function () {\n        var index = _this.handlers.indexOf(handler);\n\n        if (index !== -1) {\n          _this.handlers.splice(index, 1);\n        }\n      };\n    }\n  }]);\n  return History;\n}();\n\nvar _default = new History();\n\nexports[\"default\"] = _default;"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","History","this","handlers","onHash","bind","initEvent","key","window","addEventListener","removeEventListener","forEach","h","patchname","location","pathname","handler","_this","push","index","indexOf","splice","_default"],"mappings":"aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCA,QAAQ,qCAERA,QAAQ,qCAERA,QAAQ,mCAERA,QAAQ,oCAERA,QAAQ,gDAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,aAAI,EAErB,IAAIE,iBAAmBN,uBAAuBC,QAAQ,0CAElDM,cAAgBP,uBAAuBC,QAAQ,uCAO/CO,QAAuB,WACzB,SAASA,KACP,EAAIF,iBAA0B,SAAGG,KAAMD,GACvCC,KAAKC,SAAW,GAChBD,KAAKE,OAASF,KAAKE,OAAOC,KAAKH,MAC/BA,KAAKI,YAyCP,OAtCA,EAAIN,cAAuB,SAAGC,EAAS,CAAC,CACtCM,IAAK,YACLT,MAAO,WACiB,oBAAXU,QACXA,OAAOC,iBAAiB,aAAcP,KAAKE,UAE5C,CACDG,IAAK,cACLT,MAAO,WACiB,oBAAXU,QACXA,OAAOE,oBAAoB,aAAcR,KAAKE,UAE/C,CACDG,IAAK,SACLT,MAAO,WACLI,KAAKC,SAASQ,QAAQ,SAAUC,GACR,oBAAXJ,QACTI,EAAE,CACAC,UAAWL,OAAOM,SAASC,eAKlC,CACDR,IAAK,SACLT,MAAO,SAAgBkB,GACrB,IAAIC,EAAQf,KAGZ,OADAA,KAAKC,SAASe,KAAKF,GACZ,WACL,IAAIG,EAAQF,EAAMd,SAASiB,QAAQJ,IAEpB,IAAXG,GACFF,EAAMd,SAASkB,OAAOF,EAAO,QAK9BlB,EA9CkB,GAiDvBqB,SAAW,IAAIrB,QAEnBJ,QAAiB,QAAIyB"}