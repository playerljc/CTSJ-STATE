"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.map"),require("core-js/modules/es.object.keys"),require("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));require("regenerator-runtime/runtime");var sage,Config,_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=require("../../react");function ownKeys(r,e){var t,n=Object.keys(r);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(r),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)),n}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){(0,_defineProperty2.default)(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}var _default={initConfig:function(e){Config=e},setSage:function(e){sage=e},mapStateToProps:function(e){var r=e.namespaces,t=e.state,n={loading:t.loading};return r&&r.length&&r.forEach(function(e){n[e]=t[e]}),n},mapDispatchToProps:function(e){var r=e.namespaces,a=e.dispatch,o={};return(r&&r.length?r:Object.keys(Config)).forEach(function(n){var e=Config[n];Object.keys(e).forEach(function(e){var r,t;"default"!==e&&(r="".concat(n).concat(e.charAt(0).toUpperCase()).concat(e.substring(1)),t="".concat(n,"/").concat(e),o[r]=function(e){return a(_objectSpread({type:t},e))})})}),o},model:function(e){var f=Config[e],r=Object.keys(f),t={};r.forEach(function(e){"default"!==e&&(t[e]=f[e].defaultResult())});var n={namespace:e,effects:{},state:_objectSpread({},t),getDefaultState:function(){return _objectSpread({},t)},reducers:{receive:function(e,r){r=r.payload;return _objectSpread(_objectSpread({},e),r)}}};return r.forEach(function(i){"default"!==i&&(n.effects[i]=_regenerator.default.mark(function e(r,t){var n,a,o,c,u;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.call,n=t.put,e.next=3,c(f[i].call,r);case 3:if(a=e.sent,u=f.default,o=u.codeKey,c=u.codeSuccessKey,u=u.dataKey,a[o]===c)return e.next=8,n({type:"receive",payload:(0,_defineProperty2.default)({},i,a[u])});e.next=8;break;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)}))}),n},connect:function(e){var n=e.map(function(e){var r=sage.getModel(e),r=r&&"getDefaultState"in r?r.getDefaultState():{};return{type:"".concat(e,"/receive"),defaultState:r}});return function(r,t){return function(e){return(0,_react.connect)(r,t)(e,{isClear:!0,clearGroup:n})}}}};exports.default=_default;
//# sourceMappingURL=serviceregister.js.map
