"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var sage,Config,_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=require("../../react");function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var _default={initConfig:function(e){Config=e},setSage:function(e){sage=e},mapStateToProps:function(e){var t=e.namespaces,r=e.state,n={loading:r.loading};return t&&t.length&&t.forEach(function(e){n[e]=r[e]}),n},mapDispatchToProps:function(e){var t=e.namespaces,a=e.dispatch,c={};return(t&&t.length?t:Object.keys(Config)).forEach(function(n){var e=Config[n];Object.keys(e).forEach(function(e){var t,r;"default"!==e&&(t="".concat(n).concat(e.charAt(0).toUpperCase()).concat(e.substring(1)),r="".concat(n,"/").concat(e),c[t]=function(e){return a(Object.assign({type:r},e))})})}),c},model:function(e){var p=Config[e],t=Object.keys(p),r={};t.forEach(function(e){"default"!==e&&(r[e]=p[e].defaultResult())});var n={namespace:e,effects:{},state:Object.assign({},r),getDefaultState:function(){return Object.assign({},r)},reducers:{receive:function(e,t){var r=t.payload;return _objectSpread(_objectSpread({},e),r)}}};return t.forEach(function(s){"default"!==s&&(n.effects[s]=_regenerator.default.mark(function e(t,r){var n,a,c,o,u,i,f;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.call,a=r.put,e.next=3,n(p[s].call,t);case 3:if(c=e.sent,o=p.default,u=o.codeKey,i=o.codeSuccessKey,f=o.dataKey,c[u]===i)return e.next=8,a({type:"receive",payload:(0,_defineProperty2.default)({},s,c[f])});e.next=8;break;case 8:case"end":return e.stop()}},e)}))}),n},connect:function(e){var n=e.map(function(e){var t=sage.getModel(e),r=t&&"getDefaultState"in t?t.getDefaultState():{};return{type:"".concat(e,"/receive"),defaultState:r}});return function(t,r){return function(e){return(0,_react.connect)(t,r)(e,{isClear:!0,clearGroup:n})}}}};exports.default=_default;
//# sourceMappingURL=serviceregister.js.map
