{"version":3,"file":"index.js","sources":["middleware/saga/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.from\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.some\");\n\nrequire(\"core-js/modules/es.function.bind\");\n\nrequire(\"core-js/modules/es.map\");\n\nrequire(\"core-js/modules/es.object.assign\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.object.values\");\n\nrequire(\"core-js/modules/es.promise\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/es.string.split\");\n\nrequire(\"core-js/modules/esnext.map.delete-all\");\n\nrequire(\"core-js/modules/esnext.map.every\");\n\nrequire(\"core-js/modules/esnext.map.filter\");\n\nrequire(\"core-js/modules/esnext.map.find\");\n\nrequire(\"core-js/modules/esnext.map.find-key\");\n\nrequire(\"core-js/modules/esnext.map.includes\");\n\nrequire(\"core-js/modules/esnext.map.key-of\");\n\nrequire(\"core-js/modules/esnext.map.map-keys\");\n\nrequire(\"core-js/modules/esnext.map.map-values\");\n\nrequire(\"core-js/modules/esnext.map.merge\");\n\nrequire(\"core-js/modules/esnext.map.reduce\");\n\nrequire(\"core-js/modules/esnext.map.some\");\n\nrequire(\"core-js/modules/esnext.map.update\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _call = _interopRequireDefault(require(\"./call\"));\n\nvar _all = _interopRequireDefault(require(\"./all\"));\n\nvar _race = _interopRequireDefault(require(\"./race\"));\n\nvar _select = _interopRequireDefault(require(\"./select\"));\n\nvar _put = _interopRequireDefault(require(\"./put\"));\n\nvar _history = _interopRequireDefault(require(\"./history\"));\n\n/**\n * Saga\n * @class Saga\n * @classdesc Saga 提供模型和对模型处理的中间件\n */\nvar Saga = /*#__PURE__*/function () {\n  function Saga() {\n    (0, _classCallCheck2[\"default\"])(this, Saga);\n\n    /**\n     * 存放所有模型\n      一个模型的结构如下\n      {\n        namespace\n        {\n          namespace: String\n          effects: Object\n          state: Object\n          reducers: Object\n        }\n      }\n     * @type {Map<any, any>}\n     */\n    this.models = new Map();\n    this.history = _history[\"default\"];\n  }\n  /**\n   * setStore - 设置store\n   * @param store\n   */\n\n\n  (0, _createClass2[\"default\"])(Saga, [{\n    key: \"setStore\",\n    value: function setStore(store) {\n      this.store = store;\n\n      if (!this.store.state.loading) {\n        // 初始化store的loading\n        this.store.state.loading = {\n          // 全局的loading默认为false\n          global: false\n        };\n      }\n    }\n    /**\n     * model - 添加一个model\n     * @param model\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"model\",\n    value: function model(_model) {\n      if (!_model) return false;\n      this.clearUnSubscriptions(_model);\n      this.models.set(_model.namespace, _model);\n      this.init(_model);\n      return true;\n    }\n    /**\n     * unmodel - 注销一个model\n     * @param namespace\n     */\n\n  }, {\n    key: \"unmodel\",\n    value: function unmodel(namespace) {\n      var model = this.models.get(namespace);\n\n      if (model) {\n        this.clearUnSubscriptions(model);\n        this.models[\"delete\"](namespace);\n        delete this.store.state[namespace];\n      }\n    }\n    /**\n     * hasModel - 是否有指定model\n     * @param namespace\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"hasModel\",\n    value: function hasModel(namespace) {\n      return !!this.models.get(namespace);\n    }\n    /**\n     * replacemodal - 替换一个model\n     * @param model\n     */\n\n  }, {\n    key: \"replaceModel\",\n    value: function replaceModel(model) {\n      return this.model(model);\n    }\n    /**\n     * getModel - 获取Model\n     * @param namespace\n     * @return Model\n     */\n\n  }, {\n    key: \"getModel\",\n    value: function getModel(namespace) {\n      return this.models.get(namespace);\n    }\n    /**\n     * run - 运行generator(迭代model的effects)\n     * @param g - 生成器函数类\n     // * @param state - store的state (dispatch调用则是全局，如果在effects中使用put调用则是model中的state)\n     * @param params - action的参数\n     * @param model - 模型\n     */\n\n  }, {\n    key: \"run\",\n    value: function run(_ref) {\n      var _this = this;\n\n      var g = _ref.g,\n          params = _ref.params,\n          model = _ref.model;\n      return new Promise(function (resolve, reject) {\n        // 生成器函数\n        var generator = g(params, {\n          call: _call[\"default\"],\n          all: _all[\"default\"],\n          race: _race[\"default\"],\n          // 这块应该传入所有model的state数据，而不是store的state数据\n          select: (0, _select[\"default\"])(_this\n          /* state */\n          ),\n          put: _put[\"default\"].call(_this, {\n            // state: state[model.namespace],\n            // 全局的store\n            store: _this.store,\n            params: params,\n            model: model,\n            // model,\n            run: _this.run.bind(_this)\n          }) // tack: null,\n\n        });\n        /**\n         * task\n         * @param data\n         */\n\n        function next(data) {\n          return new Promise(function (s, e) {\n            /**\n             * sucess\n             * @param neginParams\n             */\n            function nextBegin(neginParams) {\n              next(neginParams).then(function () {\n                s();\n              })[\"catch\"](function (err) {\n                generator[\"throw\"](err);\n                e(err);\n              });\n            }\n            /**\n             * 拿一个(迭代)\n             * call\n             * put\n             * select\n             */\n\n\n            var _generator$next = generator.next(data),\n                value = _generator$next.value,\n                done = _generator$next.done;\n\n            if (!done) {\n              if (value instanceof Promise) {\n                value.then(function (res) {\n                  nextBegin(res);\n                })[\"catch\"](function (err) {\n                  generator[\"throw\"](err);\n                  e(err);\n                });\n              } else {\n                nextBegin(value);\n              }\n            } else {\n              s();\n            }\n          });\n        }\n\n        next().then(function () {\n          // 所有任务都完成\n          resolve();\n        })[\"catch\"](function () {\n          reject();\n        });\n      });\n    }\n    /**\n     * initSubscriptions\n     * @param model\n     */\n\n  }, {\n    key: \"initSubscriptions\",\n    value: function initSubscriptions(model) {\n      var _this2 = this;\n\n      var _model$subscriptions = model.subscriptions,\n          subscriptions = _model$subscriptions === void 0 ? {} : _model$subscriptions;\n\n      if (subscriptions) {\n        var values = Object.values(subscriptions);\n        values.forEach(function (v) {\n          v({\n            dispatch: _this2.store.dispatch,\n            history: _this2.history\n          });\n        });\n      }\n    }\n    /**\n     * clearUnSubscriptions\n     * @param model\n     */\n\n  }, {\n    key: \"clearUnSubscriptions\",\n    value: function clearUnSubscriptions(model) {\n      var _model$unsubscription = model.unsubscriptions,\n          unsubscriptions = _model$unsubscription === void 0 ? {} : _model$unsubscription;\n\n      if (unsubscriptions) {\n        var values = Object.values(unsubscriptions);\n        values.forEach(function (v) {\n          v();\n        });\n      }\n    }\n    /**\n     * init - 初始化所有model的state数据到store中\n     * @param model - 一个model\n     */\n\n  }, {\n    key: \"init\",\n    value: function init(model) {\n      var namespace = model.namespace,\n          state = model.state; // model中所有effect的loading值\n\n      var modelEffectsLoading = {};\n      var effectsKeys = Object.keys(model.effects); // 迭代一个model中的所有effect\n\n      effectsKeys.forEach(function (k) {\n        // key -> namespace/effect的名字\n        modelEffectsLoading[\"\".concat(namespace, \"/\").concat(k)] = false;\n      }); // /namespace/effects1 = false\n      // /namespace/effects2 = false\n      // /namespace/effects3 = false\n\n      Object.assign(this.store.state.loading, modelEffectsLoading); // this.store.state.loading = modelEffectsLoading;\n      // 在全局store中初始化model的数据\n\n      this.store.state[namespace] = [namespace] in this.store.state ? this.store.state[namespace] : state; // Object.assign(this.store.state, {\n      //   loading: Object.assign(this.store.state.loading || { global: false }, modelEffectsLoading),\n      //   [namespace]: [namespace] in this.store.state ? this.store.state[namespace] : state,\n      // });\n\n      this.initSubscriptions(model);\n    }\n    /**\n     * isGlobalLoading\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isGlobalLoading\",\n    value: function isGlobalLoading()\n    /* model */\n    {\n      var loading = this.store.state.loading;\n      return Array.from(this.models).some(function (_ref2) {\n        var _ref3 = (0, _slicedToArray2[\"default\"])(_ref2, 2),\n            namespace = _ref3[0],\n            model = _ref3[1];\n\n        // const { namespace } = model;\n        return Array.from(Object.keys(model.effects)).some(function (key) {\n          var curType = \"\".concat(namespace, \"/\").concat(key);\n          return loading[curType] === true;\n        });\n      }); // console.log('flag', flag);\n      // return flag;\n      // let globalLoading = false;\n      // const { loading } = this.store.state;\n      // for (const key of effectsKeys) {\n      //   const curType = `${namespace}/${key}`;\n      //   if (curType !== type) {\n      //     if (loading[curType]) {\n      //       globalLoading = true;\n      //     }\n      //   }\n      // }\n      // return globalLoading;\n    }\n    /**\n     * before - saga中间件的before方法\n     * @param state - store的数据\n     * @param action - 事务\n     * @return Promise\n     */\n\n  }, {\n    key: \"before\",\n    value: function before(_ref4) {\n      var _this3 = this;\n\n      var state = _ref4.state,\n          action = _ref4.action;\n      return new Promise(function (resolve) {\n        // 获取action中的type\n        var type = action.type; // 根据type获取namespace和effect\n\n        var _type$split = type.split('/'),\n            _type$split2 = (0, _slicedToArray2[\"default\"])(_type$split, 2),\n            namespace = _type$split2[0],\n            effect = _type$split2[1]; // 根据命名空间获取model\n\n\n        var model = _this3.models.get(namespace); // 如果存在model\n\n\n        if (model) {\n          // 获取effects的g g是一个生成器函数或者是一个reducer\n          var g = model.effects[effect]; // 如果是effect\n\n          if (g) {\n            // saga的before中修改了state的loading\n            state.loading[type] = true;\n            state.loading.global = true; // console.log('before', type, state.loading[type]);\n            // console.log('before', 'global', state.loading.global);\n          }\n\n          resolve(state);\n        } else {\n          resolve(state);\n        } // resolve(\n        //   Object.assign(state, {\n        //     loading: Object.assign(state.loading, {\n        //       global: true,\n        //       [type]: true,\n        //     }),\n        //   })\n        // );\n        // resolve(state);\n\n      });\n    }\n    /**\n     * after\n     * @param state - store的数据\n     * @param action\n     * @return Promise\n     */\n\n  }, {\n    key: \"after\",\n    value: function after(_ref5) {\n      var _this4 = this;\n\n      var state = _ref5.state,\n          action = _ref5.action;\n      return new Promise(function (resolve) {\n        // 类型，实例，和回调\n        var type = action.type,\n            ins = action.ins,\n            success = action.success,\n            params = (0, _objectWithoutProperties2[\"default\"])(action, [\"type\", \"ins\", \"success\"]); // 根据type获取namespace和effect\n\n        var _type$split3 = type.split('/'),\n            _type$split4 = (0, _slicedToArray2[\"default\"])(_type$split3, 2),\n            namespace = _type$split4[0],\n            effect = _type$split4[1]; // 根据命名空间获取model\n\n\n        var model = _this4.models.get(namespace);\n\n        if (model) {\n          // 获取effects的g g是一个生成器函数\n          var g = model.effects[effect]; // 如果是effect\n\n          if (g) {\n            // 迭代model的effects,这里的state是全局的state\n            _this4.run({\n              g: g,\n              state: state,\n              params: params,\n              model: model\n            }).then(function () {\n              // model的返回\n              // TODO: 将在模型中改变的state同步到全局store的state中\n              // loading变成false\n              state.loading[type] = false; // 将在模型中改变的state同步到全局store的state中\n\n              state[namespace] = model.state;\n              state.loading.global = _this4.isGlobalLoading(); // console.log('after', 'effect', type, state.loading[type]);\n              // console.log('after', 'effect', 'global', state.loading.global);\n              // const result = Object.assign(state, {\n              //   [namespace]: model.state,\n              //   loading: Object.assign(this.store.state.loading, {\n              //     global: this.isGlobalLoading(model, type),\n              //     [type]: false,\n              //   }),\n              // });\n\n              resolve(state);\n            });\n          } // 如果是reducer\n          else if (model.reducers[effect]) {\n              // 是reducers\n              model.state = model.reducers[effect](state[namespace], {\n                payload: params\n              }); // TODO: 将在模型中改变的state同步到全局store的state中\n\n              state[namespace] = model.state; // state.loading[type] = false;\n              // state.loading.global = this.isGlobalLoading(model);\n              // console.log('after', 'reducers', type, state.loading[type]);\n              // console.log('after', 'reducers', 'global', state.loading.global);\n\n              resolve(state);\n            }\n        } else {\n          // 没有model的返回\n          resolve(state);\n        }\n      });\n    }\n  }]);\n  return Saga;\n}();\n\nvar _default = function _default() {\n  return new Saga();\n};\n\nexports[\"default\"] = _default;"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_objectWithoutProperties2","_slicedToArray2","_classCallCheck2","_createClass2","_call","_all","_race","_select","_put","_history","Saga","this","models","Map","history","key","store","state","loading","global","_model","clearUnSubscriptions","set","namespace","init","model","get","_ref","_this","g","params","Promise","resolve","reject","generator","call","all","race","select","put","run","bind","next","data","s","e","nextBegin","neginParams","then","err","_generator$next","done","res","_this2","_model$subscriptions","subscriptions","values","forEach","v","dispatch","_model$unsubscription","unsubscriptions","modelEffectsLoading","keys","effects","k","concat","assign","initSubscriptions","Array","from","some","_ref2","_ref3","curType","_ref4","_this3","action","type","_type$split","split","_type$split2","effect","_ref5","_this4","ins","success","_type$split3","_type$split4","isGlobalLoading","reducers","payload","_default"],"mappings":"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"}