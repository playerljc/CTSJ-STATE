{"version":3,"sources":["state/createStore.js"],"names":["trigger","action","this","listeners","forEach","ins","Object","defineProperty","exports","value","Store","reducer","preloadedState","state","assign","prototype","getState","dispatch","Function","bind","call","subscribe","listener","_this","push","index","indexOf","splice","default_1","default"],"mappings":"AAAA,aAMA,SAASA,QAAQC,GACGC,KAAKC,UACXC,QAAQ,SAAUC,GACxBA,EAAIJ,KARZK,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IAgBtD,IAAIC,MAAuB,WAMvB,SAASA,EAAMC,EAASC,QACG,IAAnBA,IAA6BA,EAAiB,IAClDV,KAAKS,QAAUA,EACfT,KAAKW,MAAQP,OAAOQ,OAAO,GAAIF,GAC/BV,KAAKC,UAAY,GAsCrB,OAhCAO,EAAMK,UAAUC,SAAW,WACvB,OAAOd,KAAKW,OAMhBH,EAAMK,UAAUE,SAAW,SAAUhB,GACjC,GAAIA,aAAkBiB,SAClBjB,EAAOC,KAAKe,SAASE,KAAKjB,WAEzB,CACD,IAAIW,EAAQX,KAAKS,QAAQT,KAAKW,MAAOZ,GACrCC,KAAKW,MAAQA,EACbb,QAAQoB,KAAKlB,KAAMD,KAQ3BS,EAAMK,UAAUM,UAAY,SAAUC,GAClC,IAAIC,EAAQrB,KAEZ,OADAA,KAAKC,UAAUqB,KAAKF,GACb,WACH,IAAIG,EAAQF,EAAMpB,UAAUuB,QAAQJ,IACrB,IAAXG,GACAF,EAAMpB,UAAUwB,OAAOF,EAAO,KAInCf,EAhDe,GAwD1B,SAASkB,UAAUjB,EAASC,GACxB,OAAO,IAAIF,MAAMC,EAASC,GAE9BJ,QAAQqB,QAAUD","file":"createStore.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * trigger\r\n * @access private\r\n */\r\nfunction trigger(action) {\r\n    var listeners = this.listeners;\r\n    listeners.forEach(function (ins) {\r\n        ins(action);\r\n    });\r\n}\r\n/**\r\n * Store\r\n * @class Store\r\n * @classdesc Store\r\n */\r\nvar Store = /** @class */ (function () {\r\n    /**\r\n     * constrcutor\r\n     * @param {Function} - reducer\r\n     * @param {Object | Array} - preloadedState\r\n     */\r\n    function Store(reducer, preloadedState) {\r\n        if (preloadedState === void 0) { preloadedState = {}; }\r\n        this.reducer = reducer;\r\n        this.state = Object.assign({}, preloadedState);\r\n        this.listeners = [];\r\n    }\r\n    /**\r\n     * getState\r\n     * @return {Object}\r\n     */\r\n    Store.prototype.getState = function () {\r\n        return this.state;\r\n    };\r\n    /**\r\n     * dispatch\r\n     * @param {Object | Function} - action\r\n     */\r\n    Store.prototype.dispatch = function (action) {\r\n        if (action instanceof Function) {\r\n            action(this.dispatch.bind(this));\r\n        }\r\n        else {\r\n            var state = this.reducer(this.state, action);\r\n            this.state = state;\r\n            trigger.call(this, action);\r\n        }\r\n    };\r\n    /**\r\n     * subscribe\r\n     * @param {Function} - listener\r\n     * @return {Function}\r\n     */\r\n    Store.prototype.subscribe = function (listener) {\r\n        var _this = this;\r\n        this.listeners.push(listener);\r\n        return function () {\r\n            var index = _this.listeners.indexOf(listener);\r\n            if (index !== -1) {\r\n                _this.listeners.splice(index, 1);\r\n            }\r\n        };\r\n    };\r\n    return Store;\r\n}());\r\n/**\r\n * createStore\r\n * @param {Function} - reducer\r\n * @param {Object | Array} preloadedState\r\n * @return {Store}\r\n */\r\nfunction default_1(reducer, preloadedState) {\r\n    return new Store(reducer, preloadedState);\r\n}\r\nexports.default = default_1;\r\n"]}