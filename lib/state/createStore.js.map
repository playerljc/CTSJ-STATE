{"version":3,"sources":["state/createStore.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_default","_classCallCheck2","_createClass2","_immutable","trigger","this","listeners","forEach","ins","Store","reducer","preloadedState","arguments","length","undefined","state","assign","key","cloneDeep","action","Function","dispatch","bind","call","listener","_this","push","index","indexOf","splice"],"mappings":"AAAA,aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,QAAIE,SAErB,IAAIC,iBAAmBP,uBAAuBC,QAAQ,0CAElDO,cAAgBR,uBAAuBC,QAAQ,uCAE/CQ,WAAaT,uBAAuBC,QAAQ,sBAMhD,SAASS,UACSC,KAAKC,UACXC,QAAQ,SAAUC,GAC1BA,MAUJ,IAAIC,MAEJ,WAME,SAASA,EAAMC,GACb,IAAIC,EAAoC,EAAnBC,UAAUC,aAA+BC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,IACzF,EAAIX,iBAA0B,SAAGI,KAAMI,GACvCJ,KAAKK,QAAUA,EACfL,KAAKU,MAAQnB,OAAOoB,OAAO,GAAIL,GAC/BN,KAAKC,UAAY,GAkDnB,OA1CA,EAAIJ,cAAuB,SAAGO,EAAO,CAAC,CACpCQ,IAAK,WACLlB,MAAO,WACL,OAAOI,WAAoB,QAAEe,UAAUb,KAAKU,SAO7C,CACDE,IAAK,WACLlB,MAAO,SAAkBoB,GACvB,GAAIA,aAAkBC,SACpBD,EAAOd,KAAKgB,SAASC,KAAKjB,WACrB,CACL,IAAIU,EAAQV,KAAKK,QAAQP,WAAoB,QAAEe,UAAUb,KAAKU,OAAQI,GACtEd,KAAKU,MAAQZ,WAAoB,QAAEe,UAAUH,GAC7CX,QAAQmB,KAAKlB,SAShB,CACDY,IAAK,YACLlB,MAAO,SAAmByB,GACxB,IAAIC,EAAQpB,KAGZ,OADAA,KAAKC,UAAUoB,KAAKF,GACb,WACL,IAAIG,EAAQF,EAAMnB,UAAUsB,QAAQJ,IAErB,IAAXG,GACFF,EAAMnB,UAAUuB,OAAOF,EAAO,QAK/BlB,EA7DT,GAuEA,SAAST,SAASU,EAASC,GACzB,OAAO,IAAIF,MAAMC,EAASC","file":"createStore.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _immutable = _interopRequireDefault(require(\"../util/immutable\"));\n\n/**\r\n * trigger\r\n * @access private\r\n */\nfunction trigger() {\n  var listeners = this.listeners;\n  listeners.forEach(function (ins) {\n    ins();\n  });\n}\n/**\r\n * Store\r\n * @class Store\r\n * @classdesc Store\r\n */\n\n\nvar Store =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * constrcutor\r\n   * @param {Function} - reducer\r\n   * @param {Object | Array} - preloadedState\r\n   */\n  function Store(reducer) {\n    var preloadedState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Store);\n    this.reducer = reducer;\n    this.state = Object.assign({}, preloadedState);\n    this.listeners = [];\n  }\n  /**\r\n   * getState\r\n   * @return {Object}\r\n   */\n\n\n  (0, _createClass2[\"default\"])(Store, [{\n    key: \"getState\",\n    value: function getState() {\n      return _immutable[\"default\"].cloneDeep(this.state);\n    }\n    /**\r\n     * dispatch\r\n     * @param {Object | Function} - action\r\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      if (action instanceof Function) {\n        action(this.dispatch.bind(this));\n      } else {\n        var state = this.reducer(_immutable[\"default\"].cloneDeep(this.state), action);\n        this.state = _immutable[\"default\"].cloneDeep(state);\n        trigger.call(this);\n      }\n    }\n    /**\r\n     * subscribe\r\n     * @param {Function} - listener\r\n     * @return {Function}\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this = this;\n\n      this.listeners.push(listener);\n      return function () {\n        var index = _this.listeners.indexOf(listener);\n\n        if (index !== -1) {\n          _this.listeners.splice(index, 1);\n        }\n      };\n    }\n  }]);\n  return Store;\n}();\n/**\r\n * createStore\r\n * @param {Function} - reducer\r\n * @param {Object | Array} preloadedState\r\n * @return {Store}\r\n */\n\n\nfunction _default(reducer, preloadedState) {\n  return new Store(reducer, preloadedState);\n}"]}