{"version":3,"sources":["state/createStore.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_default","_classCallCheck2","_createClass2","trigger","action","this","listeners","forEach","ins","Store","reducer","preloadedState","arguments","length","undefined","state","assign","key","Function","dispatch","bind","call","listener","_this","push","index","indexOf","splice"],"mappings":"AAAA,aAEA,IAAIA,uBAAyBC,QAAQ,gDAErCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,QAAIE,SAErB,IAAIC,iBAAmBP,uBAAuBC,QAAQ,0CAElDO,cAAgBR,uBAAuBC,QAAQ,uCAMnD,SAASQ,QAAQC,GACCC,KAAKC,UACXC,QAAQ,SAAUC,GAC1BA,EAAIJ,KAUR,IAAIK,MAAqB,WAMvB,SAASA,EAAMC,GACb,IAAIC,EAAoC,EAAnBC,UAAUC,aAA+BC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,IACzF,EAAIX,iBAA0B,SAAGI,KAAMI,GACvCJ,KAAKK,QAAUA,EACfL,KAAKU,MAAQnB,OAAOoB,OAAO,GAAIL,GAC/BN,KAAKC,UAAY,GAkDnB,OA1CA,EAAIJ,cAAuB,SAAGO,EAAO,CAAC,CACpCQ,IAAK,WACLlB,MAAO,WACL,OAAOM,KAAKU,QAOb,CACDE,IAAK,WACLlB,MAAO,SAAkBK,GACvB,GAAIA,aAAkBc,SACpBd,EAAOC,KAAKc,SAASC,KAAKf,WACrB,CACL,IAAIU,EAAQV,KAAKK,QAAQL,KAAKU,MAAOX,GACrCC,KAAKU,MAAQA,EACbZ,QAAQkB,KAAKhB,KAAMD,MAStB,CACDa,IAAK,YACLlB,MAAO,SAAmBuB,GACxB,IAAIC,EAAQlB,KAGZ,OADAA,KAAKC,UAAUkB,KAAKF,GACb,WACL,IAAIG,EAAQF,EAAMjB,UAAUoB,QAAQJ,IAErB,IAAXG,GACFF,EAAMjB,UAAUqB,OAAOF,EAAO,QAK/BhB,EA7DgB,GAuEzB,SAAST,SAASU,EAASC,GACzB,OAAO,IAAIF,MAAMC,EAASC","file":"createStore.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/**\r\n * trigger\r\n * @access private\r\n */\nfunction trigger(action) {\n  var listeners = this.listeners;\n  listeners.forEach(function (ins) {\n    ins(action);\n  });\n}\n/**\r\n * Store\r\n * @class Store\r\n * @classdesc Store\r\n */\n\n\nvar Store = /*#__PURE__*/function () {\n  /**\r\n   * constrcutor\r\n   * @param {Function} - reducer\r\n   * @param {Object | Array} - preloadedState\r\n   */\n  function Store(reducer) {\n    var preloadedState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Store);\n    this.reducer = reducer;\n    this.state = Object.assign({}, preloadedState);\n    this.listeners = [];\n  }\n  /**\r\n   * getState\r\n   * @return {Object}\r\n   */\n\n\n  (0, _createClass2[\"default\"])(Store, [{\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\r\n     * dispatch\r\n     * @param {Object | Function} - action\r\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      if (action instanceof Function) {\n        action(this.dispatch.bind(this));\n      } else {\n        var state = this.reducer(this.state, action);\n        this.state = state;\n        trigger.call(this, action);\n      }\n    }\n    /**\r\n     * subscribe\r\n     * @param {Function} - listener\r\n     * @return {Function}\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this = this;\n\n      this.listeners.push(listener);\n      return function () {\n        var index = _this.listeners.indexOf(listener);\n\n        if (index !== -1) {\n          _this.listeners.splice(index, 1);\n        }\n      };\n    }\n  }]);\n  return Store;\n}();\n/**\r\n * createStore\r\n * @param {Function} - reducer\r\n * @param {Object | Array} preloadedState\r\n * @return {Store}\r\n */\n\n\nfunction _default(reducer, preloadedState) {\n  return new Store(reducer, preloadedState);\n}"]}