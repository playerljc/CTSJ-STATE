<<<<<<< HEAD
{"version":3,"sources":["state/createStore.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_objectWithoutProperties2","_classCallCheck2","_createClass2","_immutable","trigger","action","this","listeners","forEach","ins","Store","reducer","_this","preloadedState","arguments","length","undefined","middlewares","state","assign","m","store","key","_this2","Promise","resolveParent","rejectParent","index","cloneState","cloneDeep","next","resolve","reject","before","then","error","_this3","after","_this4","Function","dispatch","bind","runBeforeMiddlewares","beforeCloneState","success","filterAction","call","runAfterMiddlewares","afterCloneState","listener","_this5","push","indexOf","splice","_default"],"mappings":"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","file":"createStore.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _immutable = _interopRequireDefault(require(\"../util/immutable\"));\n\n/**\r\n * trigger\r\n * @access private\r\n */\nfunction trigger(action) {\n  var listeners = this.listeners;\n  listeners.forEach(function (ins) {\n    ins(action);\n  });\n}\n/**\r\n * Store\r\n * @class Store\r\n * @classdesc Store\r\n */\n\n\nvar Store = /*#__PURE__*/function () {\n  /**\r\n   * constrcutor\r\n   * @param {Function} - reducer\r\n   * @param {Object | Array} - preloadedState\r\n   * @param {Array} - middlewares\r\n   */\n  function Store(reducer) {\n    var _this = this;\n\n    var preloadedState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var middlewares = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    (0, _classCallCheck2[\"default\"])(this, Store);\n\n    this.reducer = reducer || function (state) {\n      return state;\n    };\n\n    this.state = Object.assign({}, preloadedState);\n    this.middlewares = middlewares || []; // 给每一个middleware赋值store\n\n    this.middlewares.forEach(function (m) {\n      m.store = _this;\n    });\n    this.listeners = [];\n  }\n  /**\r\n   * getState\r\n   * @return {Object}\r\n   */\n\n\n  (0, _createClass2[\"default\"])(Store, [{\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\r\n     * runBeforeMiddlewares\r\n     * @param action\r\n     * @return {Promise<state>}\r\n     */\n\n  }, {\n    key: \"runBeforeMiddlewares\",\n    value: function runBeforeMiddlewares(action) {\n      var _this2 = this;\n\n      return new Promise(function (resolveParent, rejectParent) {\n        var index = _this2.middlewares.length - 1; // 整个store的state\n\n        var cloneState = _immutable[\"default\"].cloneDeep(_this2.state);\n\n        var next = function next() {\n          return new Promise(function (resolve, reject) {\n            if (index < 0) {\n              resolve();\n            } else {\n              var middleware = _this2.middlewares[index--];\n              middleware.before({\n                state: cloneState,\n                action: action\n              }).then(function (state) {\n                cloneState = state;\n                next().then(function () {\n                  resolve();\n                });\n              })[\"catch\"](function (error) {\n                reject(error);\n              });\n            }\n          });\n        };\n\n        next().then(function () {\n          resolveParent(cloneState);\n        })[\"catch\"](function (error) {\n          rejectParent(error);\n        });\n      });\n    }\n    /**\r\n     * runAfterMiddlewares\r\n     * @param action\r\n     * @return {Promise<state>}\r\n     */\n\n  }, {\n    key: \"runAfterMiddlewares\",\n    value: function runAfterMiddlewares(action) {\n      var _this3 = this;\n\n      return new Promise(function (resolveParent, rejectParent) {\n        var index = 0;\n\n        var cloneState = _immutable[\"default\"].cloneDeep(_this3.state);\n\n        var next = function next() {\n          return new Promise(function (resolve, reject) {\n            if (index >= _this3.middlewares.length) {\n              resolve();\n            } else {\n              var middleware = _this3.middlewares[index++];\n              middleware.after({\n                state: cloneState,\n                action: action\n              }).then(function (state) {\n                cloneState = state;\n                next().then(function () {\n                  resolve();\n                });\n              })[\"catch\"](function (error) {\n                reject(error);\n              });\n            }\n          });\n        };\n\n        next().then(function () {\n          resolveParent(cloneState);\n        })[\"catch\"](function (error) {\n          rejectParent(error);\n        });\n      });\n    }\n    /**\r\n     * dispatch\r\n     * @param {Object | Function} - action\r\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      var _this4 = this;\n\n      if (action instanceof Function) {\n        action(this.dispatch.bind(this));\n      } else if (this.middlewares.length) {\n        // 如果有middlewares\n        // before\n        this.runBeforeMiddlewares(action).then(function (beforeCloneState) {\n          _this4.state = beforeCloneState; // before的时候去掉action中的success\n\n          var success = action.success,\n              filterAction = (0, _objectWithoutProperties2[\"default\"])(action, [\"success\"]);\n          trigger.call(_this4, filterAction); // detail\n\n          _this4.state = _this4.reducer(_immutable[\"default\"].cloneDeep(_this4.state), action); // after\n\n          _this4.runAfterMiddlewares(action).then(function (afterCloneState) {\n            _this4.state = afterCloneState;\n            trigger.call(_this4, action);\n          });\n        });\n      } else {\n        // 如果没有middlewares\n        this.state = this.reducer(_immutable[\"default\"].cloneDeep(this.state), action);\n        trigger.call(this, action);\n      }\n    }\n    /**\r\n     * subscribe\r\n     * @param {Function} - listener\r\n     * @return {Function}\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this5 = this;\n\n      this.listeners.push(listener);\n      return function () {\n        var index = _this5.listeners.indexOf(listener);\n\n        if (index !== -1) {\n          _this5.listeners.splice(index, 1);\n        }\n      };\n    }\n  }]);\n  return Store;\n}();\n/**\r\n * createStore\r\n * @param {Function} - reducer\r\n * @param {Object | Array} - preloadedState\r\n * @param {Array} - middlewares\r\n * @return {Store}\r\n */\n\n\nvar _default = function _default(reducer, preloadedState, middlewares) {\n  return new Store(reducer, preloadedState, middlewares);\n};\n\nexports[\"default\"] = _default;"]}
=======
{"version":3,"file":"createStore.js","sources":["state/createStore.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nrequire(\"core-js/modules/es.array.splice\");\n\nrequire(\"core-js/modules/es.function.bind\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.promise\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\r\n * trigger\r\n * @access private\r\n */\nfunction trigger(action) {\n  var listeners = this.listeners;\n  listeners.forEach(function (ins) {\n    ins(action);\n  });\n}\n/**\r\n * Store - 数据的仓库\r\n * @class Store\r\n * @classdesc 数据的仓库\r\n */\n\n\nvar Store = /*#__PURE__*/function () {\n  /**\r\n   * constrcutor - Store的构造方法\r\n   * @param {Object} - reducer - Reducer实例\r\n   * @param {Object | Array} - preloadedState - Store的默认值\r\n   * @param {Array} - middlewares - 中间件\r\n   */\n  function Store(reducer) {\n    var _this = this;\n\n    var preloadedState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var middlewares = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    (0, _classCallCheck2[\"default\"])(this, Store);\n\n    // reducer处理\n    this.reducer = reducer || function (state) {\n      return state;\n    }; // 用缺省值初始化store的数据\n\n\n    this.state = _objectSpread({}, preloadedState); // 所有的中间件\n\n    this.middlewares = middlewares || []; // 给每一个middleware赋值store\n\n    this.middlewares.forEach(function (m) {\n      m.setStore(_this);\n    }); // 对store更新进行订阅(subscribe)的句柄\n\n    this.listeners = [];\n  }\n  /**\r\n   * getState - 获取store的数据\r\n   * @return {Object}\r\n   */\n\n\n  (0, _createClass2[\"default\"])(Store, [{\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\r\n     * runBeforeMiddleWares - 执行所有中间件的before\r\n     * @param action - dispatch的action\r\n     * @return {Promise<state>}\r\n     */\n\n  }, {\n    key: \"runBeforeMiddleWares\",\n    value: function runBeforeMiddleWares(action) {\n      var _this2 = this;\n\n      return new Promise(function (resolveParent, rejectParent) {\n        // 从后往前执行middleWares\n        var index = _this2.middlewares.length - 1;\n        /**\r\n         * 执行一次middleWare的runBefore\r\n         * @return {Promise}\r\n         */\n\n        var next = function next() {\n          return new Promise(function (resolve, reject) {\n            // 所有的middleWare都执行完了\n            if (index < 0) {\n              resolve();\n            } else {\n              // 取出一个middle\n              var middleware = _this2.middlewares[index--]; // 执行middleWare的before\n\n              middleware.before({\n                // 传入的是整个数据\n                state: _this2.state,\n                action: action\n              }).then(function ()\n              /* state */\n              {\n                // cloneState = state;\n                // 继续向前执行middleWare\n                next().then(function () {\n                  resolve();\n                });\n              })[\"catch\"](function (error) {\n                reject(error);\n              });\n            }\n          });\n        }; // 执行一次middleWare的runBefore\n\n\n        next().then(function () {\n          resolveParent();\n        })[\"catch\"](function (error) {\n          rejectParent(error);\n        });\n      });\n    }\n    /**\r\n     * runAfterMiddleWares - 运行所有中间件的after\r\n     * @param action - dispatch的action\r\n     * @return {Promise<state>}\r\n     */\n\n  }, {\n    key: \"runAfterMiddleWares\",\n    value: function runAfterMiddleWares(action) {\n      var _this3 = this;\n\n      return new Promise(function (resolveParent, rejectParent) {\n        var index = 0;\n\n        var next = function next(result) {\n          return new Promise(function (resolve, reject) {\n            if (index >= _this3.middlewares.length) {\n              resolve(result);\n            } else {\n              var middleware = _this3.middlewares[index++];\n              middleware.after({\n                // 传入的是整个数据\n                state: _this3.state,\n                action: action\n              }).then(function (result1) {\n                next(result1).then(function (result2) {\n                  resolve(result2);\n                });\n              })[\"catch\"](function (error) {\n                reject(error);\n              });\n            }\n          });\n        };\n\n        next().then(function (result) {\n          resolveParent(result);\n        })[\"catch\"](function (error) {\n          rejectParent(error);\n        });\n      });\n    }\n    /**\r\n     * dispatch - 进行数据的修改\r\n     * @param {Object | Function} - action\r\n     * @return Promise | Void\r\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      var _this4 = this;\n\n      if (action instanceof Function) {\n        action(this.dispatch.bind(this));\n      } // 如果存在中间件\n      else if (this.middlewares.length) {\n          // 如果有middleWares\n          // before 执行所有的middleWare的before\n          return new Promise(function (resolve) {\n            _this4.runBeforeMiddleWares(action).then(function () {\n              // before的时候去掉action中的success\n              var success = action.success,\n                  filterAction = (0, _objectWithoutProperties2[\"default\"])(action, [\"success\"]);\n              trigger.call(_this4, filterAction); // detail 执行所有的Reducer\n\n              _this4.state = _this4.reducer(_this4.state, action); // after 执行所有的middleWare的after\n\n              _this4.runAfterMiddleWares(action).then(function (result) {\n                trigger.call(_this4, action);\n                resolve(result);\n              });\n            });\n          });\n        } else {\n          // 如果没有middleWares\n          // 执行所有的Reducer\n          this.state = this.reducer(this.state, action);\n          trigger.call(this, action);\n        }\n    }\n    /**\r\n     * subscribe - 对store数据更改的监听\r\n     * @param {Function} - listener\r\n     * @return {Function} - 删除该句柄的方法\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this5 = this;\n\n      this.listeners.push(listener);\n      return function () {\n        var index = _this5.listeners.indexOf(listener);\n\n        if (index !== -1) {\n          _this5.listeners.splice(index, 1);\n        }\n      };\n    }\n  }]);\n  return Store;\n}();\n/**\r\n * createStore - 创建一个Store\r\n * @param {Object} - reducer - Reducer实例\r\n * @param {Object | Array} - preloadedState - store的默认值\r\n * @param {Array} - middlewares - 中间件\r\n * @return {Store}\r\n */\n\n\nvar _default = function _default(reducer, preloadedState, middlewares) {\n  return new Store(reducer, preloadedState, middlewares);\n};\n\nexports[\"default\"] = _default;"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_objectWithoutProperties2","_defineProperty2","_classCallCheck2","_createClass2","ownKeys","object","enumerableOnly","symbols","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","trigger","action","this","listeners","ins","Store","reducer","_this","preloadedState","undefined","middlewares","state","m","setStore","_this2","Promise","resolveParent","rejectParent","index","next","resolve","reject","before","then","error","_this3","result","after","result1","result2","_this4","Function","dispatch","bind","runBeforeMiddleWares","success","filterAction","call","runAfterMiddleWares","listener","_this5","indexOf","splice","_default"],"mappings":"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"}
>>>>>>> origin/put-global-effect-reduce
