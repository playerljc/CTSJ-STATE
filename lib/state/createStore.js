const _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', { value: !0 }), exports.default = _default; const _classCallCheck2 = _interopRequireDefault(require('@babel/runtime/helpers/classCallCheck')), _createClass2 = _interopRequireDefault(require('@babel/runtime/helpers/createClass')), _immutable = _interopRequireDefault(require('../util/immutable'));

function trigger(t) { this.listeners.forEach((e) => { e(t); }); } const Store = (function () { function i(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; (0, _classCallCheck2.default)(this, i), this.reducer = e, this.state = Object.assign({}, t), this.listeners = []; } return (0, _createClass2.default)(i, [{ key: 'getState', value() { return _immutable.default.cloneDeep(this.state); } }, { key: 'dispatch', value(e) { if (e instanceof Function)e(this.dispatch.bind(this)); else { const t = this.reducer(_immutable.default.cloneDeep(this.state), e); this.state = _immutable.default.cloneDeep(t), trigger.call(this, e); } } }, { key: 'subscribe', value(t) { const i = this; return this.listeners.push(t), function () { const e = i.listeners.indexOf(t); e !== -1 && i.listeners.splice(e, 1); }; } }]), i; }()); function _default(e, t) { return new Store(e, t); }
// # sourceMappingURL=createStore.js.map
