"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));function trigger(t){this.listeners.forEach(function(e){e(t)})}var Store=function(){function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];(0,_classCallCheck2.default)(this,s),this.reducer=e,this.state=Object.assign({},t),this.middlewares=i||[],this.listeners=[]}return(0,_createClass2.default)(s,[{key:"getState",value:function(){return this.state}},{key:"dispatch",value:function(e){if(e instanceof Function)e(this.dispatch.bind(this));else{if(this.middlewares)for(var t=this.middlewares.length-1;0<=t;t--){(0,this.middlewares[t].before)(this.state,e)}var i=this.reducer(this.state,e);if(this.state=i,this.middlewares)for(var s=0;s<this.middlewares.length;s++){(0,this.middlewares[s].after)(this.state,e)}trigger.call(this,e)}}},{key:"subscribe",value:function(t){var i=this;return this.listeners.push(t),function(){var e=i.listeners.indexOf(t);-1!==e&&i.listeners.splice(e,1)}}}]),s}();function _default(e,t){return new Store(e,t)}
//# sourceMappingURL=createStore.js.map
