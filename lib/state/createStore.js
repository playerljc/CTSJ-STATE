"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var immutable_1=__importDefault(require("../util/immutable"));function trigger(e){this.listeners.forEach(function(t){t(e)})}var Store=function(){function t(t,e){void 0===e&&(e={}),this.reducer=t,this.state=Object.assign({},e),this.listeners=[]}return t.prototype.getState=function(){return immutable_1.default.cloneDeep(this.state)},t.prototype.dispatch=function(t){if(t instanceof Function)t(this.dispatch.bind(this));else{var e=this.reducer(immutable_1.default.cloneDeep(this.state),t);this.state=immutable_1.default.cloneDeep(e),trigger.call(this,t)}},t.prototype.subscribe=function(e){var i=this;return this.listeners.push(e),function(){var t=i.listeners.indexOf(e);-1!==t&&i.listeners.splice(t,1)}},t}();function default_1(t,e){return new Store(t,e)}exports.default=default_1;
//# sourceMappingURL=createStore.js.map
